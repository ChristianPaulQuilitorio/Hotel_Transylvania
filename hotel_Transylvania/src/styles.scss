

// Custom Theming for Angular Material
// For more information: https://material.angular.dev/guide/theming
@use '@angular/material' as mat;

/* Global brand colors â€” khaki aesthetic */
:root {
  /* Brand palette */
  --brand-khaki: #bdb76b; /* dark khaki */
  --brand-khaki-rgb: 189, 183, 107;
  --brand-olive: #5a5a3a; /* supporting/dark text */
  --brand-sand: #f5f1d6; /* soft light */
  --brand-ivory: #fffdf4;

  /* Bootstrap runtime variables */
  --bs-primary: var(--brand-khaki);
  --bs-primary-rgb: var(--brand-khaki-rgb);
  --bs-link-color: #6b8e23; /* olive drab links */
  --bs-link-hover-color: #556b2f;
}

html {
  @include mat.theme((
    color: (
      theme-type: light,
  primary: mat.$yellow-palette,
  tertiary: mat.$blue-palette,
    ),
    typography: Roboto,
    density: 0,
  ));
}/* You can add global styles to this file, and also import other style files */

html, body { height: 100%; }
body { 
  margin: 0; 
  font-family: Roboto, "Helvetica Neue", sans-serif; 
  background: linear-gradient(180deg, var(--brand-ivory) 0%, #faf9f0 40%, #ffffff 100%);
}

/* Make media responsive by default */
img, svg, video, canvas { max-width: 100%; height: auto; }

/* Angular Material toolbar primary override to khaki */
.mat-toolbar.mat-primary {
  --mat-toolbar-container-background-color: var(--brand-khaki);
  --mat-toolbar-container-text-color: #1b1b1b;
}

/* Apply gradient only when not explicitly disabled */
:root:not(.no-toolbar-gradient) .mat-toolbar.mat-primary {
  background: linear-gradient(90deg, var(--brand-khaki), #a8a154) !important;
}

:root:not(.no-toolbar-gradient) .mat-toolbar.mat-primary:hover {
  background: linear-gradient(90deg, #a39d4f, #908a44) !important;
}

/* Buttons (Bootstrap) to ensure khaki primary is crisp */
.btn-primary {
  --bs-btn-color: #1b1b1b;
  --bs-btn-bg: var(--brand-khaki);
  --bs-btn-border-color: var(--brand-khaki);
  --bs-btn-hover-bg: #a8a154;
  --bs-btn-hover-border-color: #a8a154;
  --bs-btn-active-bg: #9a944b;
  --bs-btn-active-border-color: #9a944b;
}

.btn-outline-primary {
  --bs-btn-color: var(--brand-khaki);
  --bs-btn-border-color: var(--brand-khaki);
  --bs-btn-hover-bg: var(--brand-khaki);
  --bs-btn-hover-border-color: var(--brand-khaki);
  --bs-btn-hover-color: #1b1b1b;
}

/* Cards: slightly softer corners globally */
.card { border-radius: 12px; overflow: hidden; }

/* High contrast mode overrides */
.hc {
  --brand-khaki: #8b8b2b; /* darker for higher contrast */
  --brand-khaki-rgb: 139, 139, 43;
  --bs-link-color: #0f3d1f;
  --bs-link-hover-color: #0b2c16;
}

.hc body { background: #fffef7; }
.hc .mat-toolbar.mat-primary { background: linear-gradient(90deg, #7a7a24, #68681f) !important; }
.hc .btn-primary { --bs-btn-bg: var(--brand-khaki); --bs-btn-border-color: var(--brand-khaki); }

/* Skip link for keyboard users */
.skip-link {
  position: absolute;
  left: -9999px;
  top: 0;
  background: #000;
  color: #fff;
  padding: .5rem .75rem;
  z-index: 2000;
}
.skip-link:focus {
  left: 0.5rem;
  top: 0.5rem;
  border-radius: 6px;
}

/* Strong, consistent focus ring */
*:focus-visible {
  outline: 3px solid #3b5; /* greenish highlight works with khaki */
  outline-offset: 2px;
}

/* Respect reduced motion more broadly */
@media (prefers-reduced-motion: reduce) {
  * { transition: none !important; animation: none !important; }
}

/* Dark theme (toggle via .theme-dark on :root) */
.theme-dark {
  --brand-khaki: #c5b76b; /* keep accent warm */
  --brand-khaki-rgb: 197, 183, 107;
  --brand-olive: #d9d9c4; /* lighter text */
  --brand-sand: #2b2b2b;
  --brand-ivory: #1e1e1e;
  --bs-link-color: #9acd32;
  --bs-link-hover-color: #7fb02a;
}

.theme-dark body { background: linear-gradient(180deg, #161616 0%, #1b1b1b 40%, #202020 100%); color: #e7e7e7; }
.theme-dark .mat-toolbar.mat-primary { 
  --mat-toolbar-container-background-color: #2a2a2a; 
  --mat-toolbar-container-text-color: #f2f2f2; 
  background: #2a2a2a !important; 
}
:root.theme-dark:not(.no-toolbar-gradient) .mat-toolbar.mat-primary { background: linear-gradient(90deg, #2f2f2f, #3a3a3a) !important; }
.theme-dark .btn-primary { --bs-btn-color: #111; --bs-btn-bg: var(--brand-khaki); --bs-btn-border-color: var(--brand-khaki); }
.theme-dark .card { background-color: #262626; color: #e7e7e7; }
/* Strengthen base text and headings in dark mode for readability */
.theme-dark body { color: #ededed; }
.theme-dark h1, .theme-dark h2, .theme-dark h3, .theme-dark h4, .theme-dark h5, .theme-dark h6 { color: #f3f3f3; }
.theme-dark .lead { color: #d9d9d9 !important; }
.theme-dark .small, .theme-dark small { color: #c9c9c9; }
.theme-dark a { color: var(--bs-link-color); }
.theme-dark a:hover { color: var(--bs-link-hover-color); }

/* Landing featured cards: raise contrast for metadata */
.theme-dark .featured-section .card { background-color: #2a2a2a; }
.theme-dark .featured-section .text-muted { color: #c6c6c6 !important; }
.theme-dark .featured-section .badge.bg-success { color: #fff; }

/* Chat & offcanvas readability in dark mode */
.theme-dark .offcanvas,
.theme-dark .offcanvas-header,
.theme-dark .offcanvas-body { background-color: #1b1b1b; color: #e7e7e7; }
.theme-dark .btn-close { filter: invert(1) grayscale(100%); opacity: 0.8; }
.theme-dark .btn-close:hover { opacity: 1; }
.theme-dark .chat-messages { background: #141414 !important; border-color: #333 !important; }
.theme-dark .chat-bubble.assistant { background: #2a2a2a !important; color: #f0f0f0 !important; }
.theme-dark .chat-bubble.user { color: #111 !important; }
.theme-dark .text-muted { color: #cfcfcf !important; }
.theme-dark .chat-bubble .text-muted,
.theme-dark .chat-bubble small,
.theme-dark .chat-bubble .small { color: #d8d8d8 !important; }
.theme-dark .chat-bubble a { color: #9bd83a; }
.theme-dark .chat-bubble a:hover { color: #b2ea48; }
/* Improve readability for light cards embedded inside chat bubbles (rooms/availability) */
.theme-dark .chat-bubble .bg-light,
.theme-dark .chat-bubble .bg-light-subtle { background-color: #2f2f2f !important; color: #ededed !important; }
.theme-dark .chat-bubble .border { border-color: #4a4a4a !important; }
.theme-dark .chat-bubble .fw-semibold { color: #f3f3f3; }
.theme-dark .chat-bubble .btn-outline-secondary { --bs-btn-color: #e6e6e6; --bs-btn-border-color: #8a8a8a; }
.theme-dark .chat-bubble .btn-outline-secondary:hover { --bs-btn-hover-bg: #3a3a3a; --bs-btn-hover-border-color: #9a9a9a; --bs-btn-hover-color: #fff; }
.theme-dark .form-control { background: #1c1c1c; color: #f0f0f0; border-color: #4a4a4a; }
.theme-dark .form-control::placeholder { color: #b5bdc7; }
.theme-dark .input-group-text, .theme-dark .form-select { background: #1c1c1c; color: #f0f0f0; border-color: #4a4a4a; }
.theme-dark .btn-outline-secondary {
  --bs-btn-color: #d0d0d0;
  --bs-btn-border-color: #6a6a6a;
  --bs-btn-hover-bg: #2a2a2a;
  --bs-btn-hover-border-color: #7a7a7a;
  --bs-btn-hover-color: #ffffff;
}

/* Make Bootstrap modals comfortable in dark mode (reduce bright white cards) */
.theme-dark .modal-content {
  background-color: #242424; /* dark but not pitch black */
  color: #eaeaea;
  border: 1px solid rgba(255,255,255,0.06);
  box-shadow: 0 8px 24px rgba(0,0,0,0.6);
}
.theme-dark .modal-header,
.theme-dark .modal-footer {
  background: transparent;
  border-color: rgba(255,255,255,0.04);
}
.theme-dark .modal-title { color: #f3f3f3; }
.theme-dark .modal-backdrop.show { background-color: rgba(0,0,0,0.7); }
.theme-dark .modal .btn-close { filter: invert(1) grayscale(100%); opacity: 0.9; }

/* Improve modal form contrast & accessibility in dark mode */
.theme-dark .modal-content {
  /* slightly lighter so embedded white inputs are visible */
  background-color: #1f1f1f;
  color: #f0f0f0;
}
.theme-dark .modal-body { font-size: 0.95rem; line-height: 1.45; }
.theme-dark .modal .form-label { color: #dddddd; font-weight: 600; }
.theme-dark .modal .form-text, .theme-dark .modal .small { color: #cfcfcf; }
.theme-dark .modal .form-control,
.theme-dark .modal select.form-select,
.theme-dark .modal textarea.form-control {
  background: #141414; /* dark field */
  color: #eeeeee;
  border: 1px solid #353535;
  box-shadow: none;
}
.theme-dark .modal .form-control::placeholder,
.theme-dark .modal textarea.form-control::placeholder { color: #9f9f9f; }
.theme-dark .modal .form-control:focus,
.theme-dark .modal textarea.form-control:focus,
.theme-dark .modal .form-select:focus {
  outline: 3px solid rgba(155,216,58,0.12); /* subtle khaki focus */
  border-color: rgba(155,216,58,0.28);
}
.theme-dark .modal .btn-primary {
  --bs-btn-bg: var(--brand-khaki);
  --bs-btn-color: #111;
  border: 1px solid rgba(0,0,0,0.16);
  box-shadow: 0 2px 6px rgba(0,0,0,0.45);
}
.theme-dark .modal .btn-secondary {
  background: transparent;
  color: #ddd;
  border: 1px solid rgba(255,255,255,0.06);
}
.theme-dark .badge { color: #fff !important; }

/* Improve star rating contrast */
.theme-dark .text-warning { color: #ffd54a !important; }

/* Ensure modal close button is reachable and visible */
.theme-dark .modal-header .btn-close { filter: invert(1) grayscale(100%); opacity: 0.95; }

/* Make interactive elements easier to hit */
.theme-dark .modal .btn, .theme-dark .modal .form-control { border-radius: 8px; }

/* Respect prefers-contrast for users needing higher contrast */
@media (prefers-contrast: more) {
  .theme-dark .modal-content { background-color: #111 !important; color: #fff !important; }
  .theme-dark .modal .form-control { border-color: #666 !important; }
}


/* Hide chat FAB when help/tutorial is open */
.offcanvas-help-open .chat-fab { display: none !important; }

/* Toast appearance in dark theme */
.theme-dark .toast {
  background-color: rgba(36,36,36,0.96) !important;
  color: #eee !important;
  border: 1px solid rgba(255,255,255,0.04) !important;
}
.theme-dark .toast .toast-body { color: #eaeaea !important; }
.theme-dark .toast .btn-close { filter: invert(1) grayscale(100%); opacity: 0.85; }
.theme-dark .toast.align-items-center.text-bg-dark { background-color: rgba(28,28,28,0.96) !important; }

/* Make light utility backgrounds blend into modal dark mode */
.theme-dark .modal .bg-light,
.theme-dark .modal .bg-light-subtle,
.theme-dark .modal .bg-light-soft {
  background-color: #222 !important;
  color: #eaeaea !important;
  border: 1px solid rgba(255,255,255,0.04) !important;
}

/* Ensure the rating box and its inputs blend in dark mode */
.theme-dark .modal .rating-box,
.theme-dark .modal .bg-light-subtle {
  padding: .9rem !important;
  border-radius: 8px;
}

/* Ratings textarea and submit button in dark mode */
.theme-dark .modal .rating-box textarea.form-control,
.theme-dark .modal .rating-box .form-control {
  background: #121212 !important;
  color: #f1f1f1 !important;
  border: 1px solid #3a3a3a !important;
}
.theme-dark .modal .rating-box .btn-outline-primary {
  --bs-btn-color: #e9e9e9;
  --bs-btn-border-color: rgba(255,255,255,0.06);
  background: rgba(255,255,255,0.02);
}

/* Star buttons contrast */
.theme-dark .modal .rating-box button.btn-sm {
  background: transparent;
  color: #ffffff; /* make unselected stars white in dark mode */
  border: 0;
}
.theme-dark .modal .rating-box button.btn-sm.text-warning {
  color: #ffd54a !important;
}

/* Add subtle white outline to each star button so unselected stars are visible in dark mode */
.theme-dark .modal .rating-box button.btn-sm {
  border: 1px solid rgba(255,255,255,0.10);
  padding: 0.15rem 0.45rem;
  border-radius: 6px;
  transition: background .12s ease, color .12s ease, transform .08s ease;
}
.theme-dark .modal .rating-box button.btn-sm:hover {
  background: rgba(255,255,255,0.04);
  transform: translateY(-1px);
}
.theme-dark .modal .rating-box button.btn-sm.text-warning {
  border-color: rgba(255,213,74,0.18);
  background: rgba(255,213,74,0.06);
}

/* Make rating stars hoverable in both light and dark modes */
.modal .rating-box button.btn-sm,
.modal .bg-light-subtle .btn.btn-sm {
  cursor: pointer;
}
.modal .rating-box button.btn-sm:hover,
.modal .bg-light-subtle .btn.btn-sm:hover {
  transform: translateY(-1px);
  filter: brightness(1.06);
}

/* Ensure star buttons inside the template's bg-light-subtle container are styled
   (the template uses .bg-light-subtle rather than .rating-box). This makes
   unselected stars white and adds an outline/hover for affordance. */
.theme-dark .modal .bg-light-subtle .btn.btn-sm {
  color: #ffffff !important; /* unselected stars white */
  border: 1px solid rgba(255,255,255,0.10) !important;
  padding: 0.15rem 0.45rem !important;
  border-radius: 6px !important;
  background: transparent !important;
}
.theme-dark .modal .bg-light-subtle .btn.btn-sm:hover {
  background: rgba(255,255,255,0.04) !important;
}
.theme-dark .modal .bg-light-subtle .btn.btn-sm.text-warning {
  color: #ffd54a !important;
  border-color: rgba(255,213,74,0.18) !important;
  background: rgba(255,213,74,0.06) !important;
}

/* During guided tour, keep FAB visible so it can be highlighted */

/* Disable body scroll during tour for steadier positioning */
body.tour-open { overflow: hidden; }

/* Toolbar hover affordance */
.mat-toolbar button.mat-mdc-button:hover,
.mat-toolbar a.mat-mdc-button:hover {
  background: rgba(0,0,0,0.04);
}

/* Ensure Material menu icon (hamburger) is visible in dark mode */
.theme-dark .mat-toolbar mat-icon,
.theme-dark .mat-toolbar .mat-icon {
  color: #ffffff !important;
  filter: none !important;
}

/* Also ensure the mat-icon-button background/hover is adjusted for dark toolbar */
.theme-dark .mat-toolbar button[mat-icon-button] {
  color: #ffffff !important;
}

/* Navbar burger (toggler) white in dark theme */
.theme-dark .navbar-toggler {
  border-color: rgba(255,255,255,0.12);
}
.theme-dark .navbar-toggler .navbar-toggler-icon {
  /* Override Bootstrap's SVG to use a white stroke so the three lines are visible in dark mode */
  background-image: url("data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3E%3Cpath stroke='%23ffffff' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3E%3C/svg%3E") !important;
  filter: none !important;
}
.theme-dark .navbar-toggler:focus {
  box-shadow: 0 0 0 0.25rem rgba(255,255,255,0.06);
}

/* Stronger overrides in case Bootstrap specificity or different navbar classes are used */
:root.theme-dark .navbar-toggler,
.theme-dark .navbar-toggler,
.navbar-dark .navbar-toggler {
  border-color: rgba(255,255,255,0.12) !important;
}

:root.theme-dark .navbar-toggler-icon,
.theme-dark .navbar-toggler-icon,
.navbar-dark .navbar-toggler-icon {
  /* Ensure any SVG using currentColor will render white */
  color: #ffffff !important;
  /* Also replace the background-image with an explicit white-stroked SVG as a fallback */
  background-image: url("data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3E%3Cpath stroke='%23ffffff' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3E%3C/svg%3E") !important;
  background-repeat: no-repeat !important;
  background-position: center !important;
  background-size: 1.25em 1.25em !important;
  filter: none !important;
}

/* If a custom SVG <svg> element is used inside the toggler, make sure its strokes are white */
.theme-dark .navbar-toggler svg path,
.theme-dark .navbar-toggler svg line {
  stroke: #ffffff !important;
  fill: none !important;
}
